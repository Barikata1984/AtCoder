#include <iostream>#include <vector>#define INF 1000000007;int main(){    int n;    std::cin >> n;    std::vector<std::vector<int>> subordinates(n, std::vector<int>(0));    for(int i = 1; i < n; ++i){        int val;        std::cin >> val;        subordinates.at(n - val).push_back(n - 1 - i);    }    std::vector<int> scores(n, 0);    for(int i = 0; i < n; ++i){        int sz = subordinates.at(i).size();        if(0 == sz){            scores.at(i) = 1;        }else if(1 == sz){            scores.at(i) = 2 * scores.at(subordinates.at(i).at(0)) + 1;        }else{            int max = 0, min = INF;            for(int j = 0; j < sz; ++j){                int score = scores.at(subordinates.at(i).at(j));                max = std::max(max, score);                min = std::min(min, score);            }            scores.at(i) = max + min + 1;        }    }    std::cout << scores.at(n - 1) << std::endl;        return 0;}